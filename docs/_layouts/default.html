<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en-US' }}">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

{% seo %}
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    {% include head-custom.html %}
  </head>
  <body>
    <div class="page-wrapper">
      {% include sidebar.html %}
      
      <div class="main-wrapper">
        <a id="skip-to-content" href="#content">Skip to the content.</a>

        <header class="page-header" role="banner">
          <h1 class="project-name">{{ page.title | default: site.title | default: site.github.repository_name }}</h1>
          <h2 class="project-tagline">{{ page.description | default: site.description | default: site.github.project_tagline }}</h2>
          {% if site.github.is_project_page %}
            <a href="{{ site.github.repository_url }}" class="btn">View on GitHub</a>
          {% endif %}
          {% if site.show_downloads %}
            <a href="{{ site.github.zip_url }}" class="btn">Download .zip</a>
            <a href="{{ site.github.tar_url }}" class="btn">Download .tar.gz</a>
          {% endif %}
        </header>

        <main id="content" class="main-content" role="main">
          {{ content }}

          <footer class="site-footer">
            {% if site.github.is_project_page %}
              <span class="site-footer-owner"><a href="{{ site.github.repository_url }}">{{ site.github.repository_name }}</a> is maintained by <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a>.</span>
            {% endif %}
            <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
          </footer>
        </main>
      </div>
    </div>
    
    <script>
      // Dark mode functionality
      document.addEventListener('DOMContentLoaded', function() {
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const body = document.body;

        // Check for saved theme preference or default to dark mode
        const currentTheme = localStorage.getItem('theme') || 'dark';

        // Apply the theme
        if (currentTheme === 'dark') {
          body.classList.add('dark-mode');
          updateIcon('dark');
        } else {
          updateIcon('light');
        }

        // Theme toggle handler
        if (themeToggle) {
          themeToggle.addEventListener('click', function() {
            body.classList.toggle('dark-mode');

            if (body.classList.contains('dark-mode')) {
              updateIcon('dark');
              localStorage.setItem('theme', 'dark');
            } else {
              updateIcon('light');
              localStorage.setItem('theme', 'light');
            }
          });
        }

        function updateIcon(theme) {
          const baseUrl = '{{ site.baseurl }}';
          if (theme === 'dark') {
            themeIcon.src = baseUrl + '/assets/light-mode.svg';
            themeIcon.alt = 'Switch to light mode';
          } else {
            themeIcon.src = baseUrl + '/assets/dark-mode.svg';
            themeIcon.alt = 'Switch to dark mode';
          }
        }
      });
      
      // Sidebar toggle functionality
      document.addEventListener('DOMContentLoaded', function() {
        const toggle = document.getElementById('sidebarToggle');
        const collapseBtn = document.getElementById('sidebarCollapseBtn');
        const sidebar = document.querySelector('.sidebar');
        const body = document.body;
        
        // Mobile sidebar toggle
        if (toggle && sidebar) {
          toggle.addEventListener('click', function() {
            sidebar.classList.toggle('open');
            body.classList.toggle('sidebar-open');
          });
          
          // Close sidebar when clicking outside on mobile
          document.addEventListener('click', function(event) {
            if (window.innerWidth <= 1024) {
              if (!sidebar.contains(event.target) && !toggle.contains(event.target)) {
                sidebar.classList.remove('open');
                body.classList.remove('sidebar-open');
              }
            }
          });
        }
        
        // Desktop sidebar collapse
        if (collapseBtn && sidebar) {
          collapseBtn.addEventListener('click', function(event) {
            event.stopPropagation();
            sidebar.classList.toggle('collapsed');
            
            // Update button icon
            if (sidebar.classList.contains('collapsed')) {
              collapseBtn.textContent = '▶';
            } else {
              collapseBtn.textContent = '◀';
            }
          });
        }
      });
    </script>
  </body>
</html>
